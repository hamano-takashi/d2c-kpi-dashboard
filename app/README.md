# D2C KPI管理ダッシュボード アプリケーション

目標売上13億円達成のためのKGI/KPI管理ダッシュボードシステムです。

## 機能

### 1. サマリーダッシュボード
- KGI達成状況（年商/営業利益/LTV÷CPA/リピート率）
- エージェント別達成スコア
- 要注意項目アラート（70%未満）
- レーダーチャートによる全体バランス可視化

### 2. KPIツリー
- KGI → KPI-L1 → KPI-L2 → KPI-L3 の階層構造
- エージェント別フィルタリング
- 達成状況の色分け表示
- 展開/折りたたみ機能

### 3. 実績入力
- カテゴリ別入力フォーム
- 自動計算（達成率）
- 現実性チェック（ベンチマーク比較）
- 月次データ管理

### 4. メンバー管理
- メンバー追加・削除
- 権限設定（管理者/編集者/閲覧者）
- 権限別アクセス制御

### 5. 設定
- 目標値の一括初期化
- データエクスポート（JSON）
- データインポート（JSON）

## 権限レベル

| 権限 | 閲覧 | 実績入力 | 目標変更 | メンバー管理 |
|------|------|----------|----------|--------------|
| 管理者 | ○ | ○ | ○ | ○ |
| 編集者 | ○ | ○ | × | × |
| 閲覧者 | ○ | × | × | × |

## 技術スタック

- **フロントエンド**: React + TypeScript + Vite
- **バックエンド**: Node.js + Express
- **データベース**: SQLite (better-sqlite3)
- **認証**: JWT
- **チャート**: Recharts

## セットアップ

### 前提条件
- Node.js 18以上
- npm 9以上

### インストール

```bash
cd app

# すべての依存関係をインストール
npm run install:all
```

### 起動

```bash
# 開発モード（サーバー + クライアント同時起動）
npm run dev
```

- フロントエンド: http://localhost:3000
- バックエンドAPI: http://localhost:3001

### 本番ビルド

```bash
# クライアントをビルド
npm run build

# サーバーを起動
npm start
```

## 初期設定

1. アプリケーションを起動
2. 新規ユーザー登録
3. プロジェクトを作成
4. 設定画面で「目標値を初期化」をクリック
5. 実績入力画面でデータを入力

## KPI構成

合計 100+ KPI（6エージェント）

| エージェント | 説明 | KPI例 |
|-------------|------|-------|
| 🎯 COMMANDER | 戦略・財務 | 年商、営業利益、LTV、CPA |
| 📈 ACQUISITION | 集客 | 広告費、ROAS、SEO、新規顧客数 |
| ✏️ CREATIVE | 制作 | コンテンツ数、SNSフォロワー |
| 📊 INSIGHT | 分析 | 顧客分析、予測精度 |
| 💌 ENGAGEMENT | 顧客 | F2転換率、メール開封率 |
| ⚙️ OPERATIONS | 運用 | CVR、在庫回転、配送 |

## データ共有

JSONエクスポート/インポート機能を使用して、チーム間でデータを共有できます。

1. 設定画面で「JSONファイルをダウンロード」
2. ファイルを共有
3. 受け取り側で「JSONファイルを選択」してインポート

## ディレクトリ構成

```
app/
├── client/                 # フロントエンド
│   ├── src/
│   │   ├── components/     # 共通コンポーネント
│   │   ├── hooks/          # カスタムフック
│   │   ├── pages/          # ページコンポーネント
│   │   ├── types/          # 型定義
│   │   └── utils/          # ユーティリティ
│   └── index.html
├── server/                 # バックエンド
│   ├── src/
│   │   ├── database.js     # DB設定
│   │   ├── index.js        # APIサーバー
│   │   └── kpi-master.js   # KPIマスターデータ
│   └── data/               # SQLiteデータベース
└── package.json            # ルートパッケージ
```

## トラブルシューティング

### サーバーが起動しない
- Node.jsのバージョンを確認（18以上）
- `server/data/`ディレクトリが存在することを確認

### フロントエンドが表示されない
- `npm run dev:client`のログを確認
- ポート3000が使用されていないことを確認

### ログインできない
- サーバーが起動していることを確認
- `http://localhost:3001`にアクセスできることを確認

## ライセンス

MIT

# D2C KPI管理アプリ 要件定義書

## 1. プロジェクト概要

### 1.1 目的
D2C事業における目標売上13億円達成のためのKGI/KPI管理・可視化アプリケーション

### 1.2 解決する課題
- KGI/KPIの達成状況をリアルタイムで把握したい
- 目標設定が現実的かどうかを判断したい
- KPI間の相関関係を視覚的に理解したい
- チームメンバーと情報を共有したい
- 権限に応じてデータの閲覧・編集を制御したい

### 1.3 ターゲットユーザー
- D2C事業の経営者・マネージャー
- マーケティング担当者
- コンサルタント（クライアントへ提供）

---

## 2. 機能要件

### 2.1 ダッシュボード機能

| 機能 | 詳細 | 優先度 |
|------|------|--------|
| KGIサマリー表示 | 年商、営業利益、LTV÷CPA、リピート率の達成状況 | 必須 |
| エージェント別スコア | 6エージェントの達成率をカード形式で表示 | 必須 |
| アラート表示 | 達成率70%未満の項目を警告 | 必須 |
| レーダーチャート | 全体バランスを可視化 | 必須 |

### 2.2 KPIツリー機能

| 機能 | 詳細 | 優先度 |
|------|------|--------|
| 階層表示 | KGI → KPI-L1 → KPI-L2 → KPI-L3 のツリー構造 | 必須 |
| 売上分解ツリー | 年商 → チャネル別売上の分解 | 必須 |
| 顧客獲得ツリー | 新規顧客 → 広告/オーガニック → F転換率 | 必須 |
| ユニットエコノミクス | LTV÷CPA の健全性表示 | 必須 |
| クリック展開 | ノードをクリックで詳細表示 | 任意 |

### 2.3 実績入力機能

| 機能 | 詳細 | 優先度 |
|------|------|--------|
| カテゴリ別入力フォーム | 売上/チャネル/広告/顧客/運用の5カテゴリ | 必須 |
| 自動計算 | 粗利率、ROAS、LTV÷CPAなどを自動算出 | 必須 |
| 入力バリデーション | 数値チェック、範囲チェック | 必須 |
| 保存・読込 | ローカルストレージまたはファイル保存 | 必須 |
| 履歴管理 | 過去の入力データを保持（月次など） | 任意 |

### 2.4 現実性チェック機能

| 機能 | 詳細 | 優先度 |
|------|------|--------|
| ベンチマーク比較 | 業界標準値との比較 | 必須 |
| 判定表示 | ✅妥当 / ⚠️要検討 / 🔴非現実的 | 必須 |
| 相互整合性チェック | KPI間の矛盾を検出 | 任意 |

### 2.5 メンバー管理機能

| 機能 | 詳細 | 優先度 |
|------|------|--------|
| メンバー追加 | メールアドレスまたはIDで招待 | 必須 |
| 権限設定 | 管理者/編集者/閲覧者の3段階 | 必須 |
| 権限別表示制御 | 権限に応じたUI表示切り替え | 必須 |

#### 権限レベル定義

| 権限 | 閲覧 | 実績入力 | 目標変更 | メンバー管理 |
|------|------|----------|----------|--------------|
| 管理者 | ○ | ○ | ○ | ○ |
| 編集者 | ○ | ○ | × | × |
| 閲覧者 | ○ | × | × | × |

---

## 3. 画面構成

### 3.1 画面一覧

```
┌─────────────────────────────────────────────────────────────┐
│                      ヘッダー                                │
│  ロゴ | プロジェクト名 | ユーザー名 | 設定 | ログアウト      │
├─────────────────────────────────────────────────────────────┤
│  タブナビゲーション                                          │
│  [サマリー] [KPIツリー] [実績入力] [エージェント別] [設定]   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                      メインコンテンツ                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 画面詳細

#### 3.2.1 サマリー画面
- KGIカード（4つ）
- エージェント別スコアカード（6つ）
- アラート一覧
- レーダーチャート

#### 3.2.2 KPIツリー画面
- メインKPIツリー（年商起点）
- 売上分解ツリー
- 顧客獲得ツリー
- ユニットエコノミクス表示

#### 3.2.3 実績入力画面
- カテゴリ別入力カード
- 保存/リセットボタン
- サンプルデータ読込ボタン

#### 3.2.4 エージェント別画面（6画面）
- 戦略（COMMANDER）
- 集客（ACQUISITION）
- 制作（CREATIVE）
- 分析（INSIGHT）
- 顧客（ENGAGEMENT）
- 運用（OPERATIONS）

#### 3.2.5 設定画面
- プロジェクト設定
- メンバー管理
- 目標値設定
- データエクスポート

---

## 4. データ構造

### 4.1 プロジェクトデータ

```json
{
  "id": "project_001",
  "name": "D2C事業KPI管理",
  "created_at": "2024-01-01",
  "owner_id": "user_001",
  "members": [
    {
      "user_id": "user_001",
      "role": "admin",
      "name": "山田太郎",
      "email": "yamada@example.com"
    }
  ],
  "targets": {
    "revenue": 1300000000,
    "profit": 195000000,
    ...
  },
  "actuals": {
    "2024-01": { "revenue": 100000000, ... },
    "2024-02": { "revenue": 110000000, ... }
  }
}
```

### 4.2 ユーザーデータ

```json
{
  "id": "user_001",
  "name": "山田太郎",
  "email": "yamada@example.com",
  "projects": ["project_001", "project_002"]
}
```

---

## 5. 技術要件

### 5.1 動作環境

| 項目 | 要件 |
|------|------|
| 動作形式 | ローカル環境（デスクトップアプリまたはローカルサーバー） |
| OS | Windows / macOS / Linux |
| ブラウザ | Chrome, Safari, Firefox（最新版） |

### 5.2 技術スタック（案）

#### 案A: シンプル構成（推奨）
```
フロントエンド: HTML/CSS/JavaScript（Vanilla）
データ保存: ローカルファイル（JSON）
認証: シンプルなパスワード認証（ローカル）
```

#### 案B: 拡張性重視構成
```
フロントエンド: React + TypeScript
バックエンド: Node.js（Express）
データ保存: SQLite（ローカルDB）
認証: JWT（ローカル認証）
```

#### 案C: デスクトップアプリ構成
```
フレームワーク: Electron
フロントエンド: React
データ保存: SQLite
パッケージ配布: Windows/Mac向け実行ファイル
```

### 5.3 データ共有方式

ローカル環境での動作を前提とした共有方式：

| 方式 | メリット | デメリット |
|------|---------|-----------|
| ファイル共有（Dropbox等） | 設定不要 | 同時編集不可 |
| ローカルサーバー+LAN | リアルタイム共有 | ネットワーク設定必要 |
| JSONファイルエクスポート | シンプル | 手動同期 |

---

## 6. 非機能要件

### 6.1 パフォーマンス
- 画面表示: 1秒以内
- データ保存: 即時
- KPI計算: 即時

### 6.2 セキュリティ
- パスワードによるアクセス制限
- 権限に応じたデータアクセス制御
- データはローカル保存（外部送信なし）

### 6.3 ユーザビリティ
- 日本語UI
- レスポンシブデザイン
- 直感的な操作性

---

## 7. 開発フェーズ

### Phase 1: MVP（最小機能版）
- ダッシュボード（サマリー表示）
- KPIツリー表示
- 実績入力（ローカル保存）
- 日本語UI

### Phase 2: チーム機能
- メンバー管理
- 権限設定
- データ共有

### Phase 3: 高度な機能
- 履歴管理
- レポート出力
- 目標シミュレーション

---

## 8. 確認事項

以下の点について決定が必要です：

### Q1: 技術スタック
どの構成で進めますか？

| 選択肢 | 特徴 |
|--------|------|
| A: シンプル構成 | 開発速度重視、ブラウザで動作 |
| B: 拡張性重視 | 将来の機能追加に対応、やや開発期間長 |
| C: デスクトップアプリ | 配布しやすい、開発期間やや長 |

### Q2: データ共有方式
チーム間のデータ共有はどの方式が良いですか？

| 選択肢 | 用途 |
|--------|------|
| ファイル共有 | Dropbox/Google Drive等で共有 |
| ローカルサーバー | 社内LANで共有 |
| エクスポート/インポート | JSONファイルを手動でやり取り |

### Q3: 認証方式
メンバー管理の認証はどうしますか？

| 選択肢 | 特徴 |
|--------|------|
| パスワードのみ | シンプル、プロジェクト単位 |
| ユーザーID+パスワード | 個人識別可能 |
| 招待リンク | URLで招待、簡単 |

---

## 9. 次のステップ

1. 上記確認事項の決定
2. 技術設計書の作成
3. UI/UXモックアップ作成
4. 開発開始
